<!doctype html>
<html lang="en">

    <head>
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <style>
                body {
                    font-family: Arial, sans-serif;
                    margin: 0;
                    padding: 0;
                    background-color: #f4f4f4;
                }
        
                main {
                    padding: 20px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                }
        
                form {
                    background-color: #ffffff;
                    border: 1px solid #ccc;
                    border-radius: 10px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                    padding: 25px;
                    max-width: 500px;
                    width: 100%;
                    margin-top: -10px;
                    text-align: left;
                    position: relative; /* Position relative for absolute positioning */
                }
        
                label {
                    display: block;
                    margin-bottom: 5px;
                    font-weight: bold;
                }
        
                input[type="text"],
                input[type="email"],
                input[type="date"],
                select {
                    width: calc(100% - 22px);
                    padding: 5px;
                    margin-bottom: 20px;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    box-sizing: border-box;
                }
        
                select {
                    appearance: none;
                    -webkit-appearance: none;
                    -moz-appearance: none;
                    background: transparent;
                    background-image: url('data:image/svg+xml;utf8,<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
                    background-repeat: no-repeat;
                    background-position-x: calc(100% - 8px);
                    background-position-y: center;
                }
        
                .submit-btn {
                    width: 100%;
                    padding: 10px;
                    background-color: #007bff;
                    color: #ffffff;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                    transition: background-color 0.3s ease;
                }
        
                .submit-btn:hover {
                    background-color: #0056b3;
                }

                /* Styles for the modal */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    .modal-content {
        background-color: #5f5f5f;
        margin: 15% auto; /* 15% from the top and centered */
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        width: 800px; /* Set the width to 800px */
        max-width: 70%; /* Limit the maximum width to 90% of the viewport */
        text-align: center;
    }

    .close {
        color: #000000;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
    }

    h2 {
        margin-top: 0;
    }

    p {
        margin-bottom: 20px;
    }

    #okButton {
        padding: 10px 20px;
        background-color: #1BBC9B;
        color: #fff;
        border: none;
        border-radius: 4px;
        margin-left: 280px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    #okButton:hover {
        background-color: #000;
    }



        
              
            </style>
        </head>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Brain Mentor - Appointment</title>
        <link rel="stylesheet" href="/static/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
         <link rel="apple-touch-icon" sizes="76x76" href="static/images/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32"
            href="static/images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16"
            href="static/images/favicon-16x16.png">
        <link rel="manifest" href="static/images/site.webmanifest">
        <link rel="mask-icon" href="static/images/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap"
            rel="stylesheet">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
            crossorigin="anonymous">

        <script src="https://kit.fontawesome.com/b33b219100.js"
            crossorigin="anonymous"></script>

    </head>

    <body>
       <!-- Hidden dialog/modal
<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="modalTitle"></h2>
        <p id="modalMessage"></p>
        <button id="okButton">OK</button>
    </div>
</div> -->
<!-- Hidden dialog/modal -->
<!-- Hidden dialog/modal -->
<div id="myModal" class="modal">
    <div class="modal-content" id="modalContent">
        <span class="close">&times;</span>
        <div class="spinner-container">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <h2 id="modalTitle"></h2>
        <p id="modalMessage"></p>
        <button id="okButton">OK</button>
    </div>
</div>



        <!-- This is Nav Bar -->
        <header>
            <nav>
                <input type="checkbox" id="check">
                <label for="check" class="checkbtn">
                    <i class="fas fa-bars"></i>
                </label>
                <label class="logo">Brain Mentor</label>
                <ul id="menu">
                    <li><a href="/home">Home</a></li>
                    <li><a href="/detection">Detection</a></li>
                    <li><a href="/doctors">Doctors</a></li>
                    <li><a href="/patient_treat">Treatments</a></li>
                    <li><a href="/blog">Blogs</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
            </nav>
        </header>
    
        <h2 style="width: 500px; text-align: center; margin-left: 425px; border-radius: 50px; background-color: rgb(58, 58, 58); color: white; margin-top: 20px; margin-bottom: 15px; padding: 5px;">Book Your Appointment</h2>
    
        <main>
            <form id="appointmentForm" action="/make_appointment" method="POST">
                <input type="hidden" name="doctor_id" value="{{ request.args.get('doctor_id') }}">
                <label for="name">Patient Name:</label>
                <input type="text" id="name" name="name" required minlength="3" maxlength="30">
            
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required maxlength="50">
            
                <label for="number">Phone Number:</label>
                <input type="text" id="number" name="number" required maxlength="11" pattern="[0-9]{11}" inputmode="numeric">
    
            
                <label for="date">Appointment Date:</label>
                <input type="date" id="date" name="date" required>
    
                <label for="timeSlot">Select Time Slot:</label>
                <select id="timeSlot" name="timeslot" required>
                    <option value="9am-12pm">9am to 12pm</option>
                    <option value="1pm-4pm">1pm to 4pm</option>
                </select>
            
                <label for="consultation">Select consultation type:</label>
                <select id="consultation" name="consultation" required>
                    <option value="Online Meeting">Video Consultation</option>
                </select>
            
                <button class="submit-btn" type="submit">Submit</button>
            </form>
        </main>
    

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="footer-col">
                        <h2>Location</h2>
                        <span><h5>Address:</h5>
                            Pakistan Kamra Rd,<br>
                            Attock City, 43600<br><br></span>
                        <span><h5>Phone:</h5>(750) 435-6352</span>
                        <span><h5>Fax:</h5>(750) 435-6352</span>
                    </div>
                    <div class="footer-col">
                        <h2>Blog</h2>
                        <ul>
                            <li><a href="#">Right Sidebar</a></li>
                            <li><a href="#">Left Sidebar</a></li>
                            <li><a href="#">Full Width </a></li>
                            <li><a href="#">Blog Grid </a></li>
                            <li><a href="#">Blog Details </a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h2>Appointment</h2>
                        <p>Lorem ipsum dolor, sit amet consectetur<br>
                            adipisicing elit. nemo obcaecati.</p>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                            <a href="#"><i class="fab fa-google-plus"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
    
                <hr>
                <div class="copyright">
                    <span>©️ 2023 BrainMentor. All rights reserved.</span>
                </div>
            </div>
        </footer>
    
        <!-- <script>
            document.addEventListener("DOMContentLoaded", function() {
                var form = document.getElementById("appointmentForm");
        
                form.addEventListener("submit", function(event) {
                    event.preventDefault();
        
                    var inputs = form.querySelectorAll('input[required], select[required]');
                    var emptyFields = [];
                    for (var i = 0; i < inputs.length; i++) {
                        if (!inputs[i].value.trim()) {
                            emptyFields.push(inputs[i]);
                        }
                    }
        
                    if (emptyFields.length > 0) {
                        emptyFields.forEach(function(field) {
                            field.classList.add("error");
                        });
                        emptyFields[0].focus();
                        return;
                    }
        
                    // If all fields are filled, submit the form
                    var xhr = new XMLHttpRequest();
                    xhr.open("POST", form.action, true);
                    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState === XMLHttpRequest.DONE) {
                            if (xhr.status === 200) {
                                // Show modal dialog
                                var modal = document.getElementById("myModal");
                                modal.style.display = "block";
                                document.getElementById("modalTitle").innerText = "Your appointment has been booked!";
                                document.getElementById("modalMessage").innerText = "Please wait for approval.";
                            } else {
                                console.error("Failed to submit form:", xhr.statusText);
                            }
                        }
                    };
                    xhr.send(new URLSearchParams(new FormData(form)).toString());
                });
                
                // Close modal dialog when OK button is clicked and reload the page
                document.getElementById("okButton").addEventListener("click", function() {
                    var modal = document.getElementById("myModal");
                    modal.style.display = "none";
                    window.location.reload(); // Reload the page
                });
            });
        </script>
         -->

         <script>
            document.addEventListener("DOMContentLoaded", function() {
    var form = document.getElementById("appointmentForm");

    form.addEventListener("submit", function(event) {
        event.preventDefault();

        var inputs = form.querySelectorAll('input[required], select[required]');
        var emptyFields = [];
        for (var i = 0; i < inputs.length; i++) {
            if (!inputs[i].value.trim()) {
                emptyFields.push(inputs[i]);
            }
        }

        if (emptyFields.length > 0) {
            emptyFields.forEach(function(field) {
                field.classList.add("error");
            });
            emptyFields[0].focus();
            return;
        }

        // If all fields are filled, submit the form
        var xhr = new XMLHttpRequest();
        xhr.open("POST", form.action, true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    // Show modal dialog
                    var modal = document.getElementById("myModal");
                    modal.style.display = "block";

                    // Display loading spinner and message
                    var modalContent = document.getElementById("modalContent");
                    modalContent.innerHTML = `
                        <div class="spinner-container">
                            <div class="spinner-border spinner-border-lg" role="status"></div>
                            <p class="text-lg">Please Be Patient...</p>
                        </div>
                    `;

                    // Replace loading spinner with success message after 3 seconds
                    setTimeout(function() {
                        modalContent.innerHTML = `
                            <h2 id="modalTitle">Your appointment has been booked!</h2>
                            <p id="modalMessage">Please wait for approval.</p>
                            <button id="okButton">OK</button>
                        `;
                    }, 3000);
                } else {
                    console.error("Failed to submit form:", xhr.statusText);
                }
            }
        };
        xhr.send(new URLSearchParams(new FormData(form)).toString());
    });

    // Close modal dialog when OK button is clicked and reload the page
    document.getElementById("myModal").addEventListener("click", function(event) {
        var modal = document.getElementById("myModal");
        if (event.target === modal || event.target.id === "okButton") {
            modal.style.display = "none";
            window.location.reload(); // Reload the page
        }
    });
});

        </script>
        
        
        
        
        
    
    </body>

</html>